{% extends "base.html" %}
{% load i18n wagtailsettings_tags %}
{% get_settings %}


{% block content %}
<h1 class="heading heading--profiles">{% trans "Hello " %}{{ user.username }}</h1>

<div class="profiles">
  <form method="post" action="{% url 'molo.profiles:edit_my_profile' %}" class="profiles__form">
  {% csrf_token %}
    <fieldset>
      <label for="id_alias">
        {% trans "Nickname" %} 
        <span class="input-hint">({% trans "Appears in comments" %})</span>
      </label>
      <input type="text" name="alias" id="id_alias" value="{{ alias }}" />
    </fieldset>

    {% if settings.profiles.UserProfilesSettings.show_mobile_number_field %}
    <fieldset>
      <label for="id_mobile_number">{% trans "Mobile number" %}</label>
      {{ edit_profile_form.mobile_number.errors}}
      {{ edit_profile_form.mobile_number }}
      <span class="input-hint">{% trans "(eg: 260979000001)" %}</span>
    </fieldset>
     {% endif %}
    <input type="submit" value="{% trans "Update" %}">
  </form>
</div>

<h1 class="heading heading--profiles heading--auth">{% trans "Change 4 digit pin" %}</h1>
<div class="auth-tools">
  <form method="post" action="{% url 'molo.profiles:profile_password_change' %}" class="profiles__form">
  {% csrf_token %}
    {% if form.errors or form.non_field_errors %}
      {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
          <span class="error">{{ error }}</span>
        {% endfor %}
      {% endif %}
    {% endif %}
    {% if messages %}
    <ul class="error-list">
      {% for message in messages %}
      <li class="error-list__item error">{{ message }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    <fieldset>
      <label>{% trans "Old Password:" %}</label>
      {{password_change_form.old_password}}
      {{password_change_form.old_password.errors}}
    </fieldset>

    <fieldset>
      <label>{% trans "New Password:" %}</label>
      {{password_change_form.new_password}}
      {{form.new_password.errors}}
    </fieldset>
    
    <fieldset>
      <label>{% trans "Confirm Password:" %}</label>
      {{password_change_form.confirm_password}}
      {{form.confirm_password.errors}}
    </fieldset>
    <input type="submit" value='{% trans "Change Password" %}'>
  </form>
</div>
</div>
{% endblock %}
