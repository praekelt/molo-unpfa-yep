{% extends "base.html" %}
{% load i18n static core_tags wagtailsettings_tags wagtailcore_tags %}
{% get_settings %}

{% block content %}
<div class="profiles">
  <h4 class="heading heading--subtitle">
    {% trans "Thank you for joining!" %}
  </h4>
{% with profile_settings=settings.profiles.UserProfilesSettings %}

  {% if profile_settings.activate_dob and not profile_settings.capture_dob_on_reg or profile_settings.activate_display_name and not profile_settings.capture_display_name_on_reg or profile_settings.activate_gender and not profile_settings.capture_gender_on_reg or profile_settings.activate_location and not profile_settings.capture_location_on_reg or profile_settings.activate_education_level and not profile_settings.capture_education_level_on_reg %}
    <p class="profiles__description">{% trans "Let us know more about yourself to get access to exclusive content." %}</p>
    <form method="post" action="{% url "molo.profiles:registration_done" %}" class="profiles__form">
    {% csrf_token %}
      {% if profile_settings.activate_dob and not profile_settings.capture_dob_on_reg %}
      <fieldset>
        <label for="date_of_birth">{% trans "SELECT DATE OF BIRTH" %}</label><br>
        {{ form.date_of_birth.errors}}
        {{ form.date_of_birth }}
      </fieldset>
      {% endif %}

      {% if profile_settings.activate_display_name and not profile_settings.capture_display_name_on_reg %}
      <fieldset>
        <label for="alias">{% trans "DISPLAY NAME" %}</label><br>
          {{ form.alias.errors }}
          {{ form.alias }}
          <span class="input-hint">{% trans "We value your online security, therefore we hide your username and allow you to comment and interact with the site with a display name." %}</span>
      </fieldset>
      {% endif %}

      {% if profile_settings.activate_gender and not profile_settings.capture_gender_on_reg %}
      <fieldset>
        <label for="gender">{% trans "I IDENTIFY MY GENDER AS:" %}</label><br>
        {{ form.gender.errors }}
        {{ form.gender }}
        <span class="input-hint">{% trans "Only you will see this" %}</span>
      </fieldset>
      {% endif %}

      {% if profile_settings.activate_location and not profile_settings.capture_location_on_reg %}
      <fieldset>
        <label for="location">{% trans "WHERE DO YOU LIVE?" %}</label><br>
        {{ form.location.errors }}
        {{ form.location }}
        <span class="input-hint">{% trans "Only you will see this" %}</span>
      </fieldset>
      {% endif %}

      {% if profile_settings.activate_education_level and not profile_settings.capture_education_level_on_reg %}
      <fieldset>
        <label for="education_level">{% trans "WHAT IS YOUR HIGHEST LEVEL OF EDUCATION?" %}</label><br>
       {{ form.education_level.errors }}
       {{ form.education_level }}
       <span class="input-hint">{% trans "Only you will see this" %}</span>
      </fieldset>
      {% endif %}
    <input type="submit" value="{% trans "Save" %}" />
    </form>
  {% endif %}
{% endwith %}
  <a href="/">{% trans "Home Page" %}</a>
  <a href="{% url "molo.profiles:view_my_profile" %}">{% trans "Profile" %}</a>
</div>
{% endblock %}
{% block extra_js  %}
  <!-- Facebook Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','//connect.facebook.net/en_US/fbevents.js');

  fbq('init', '589200017912981');
  fbq('track', "PageView");

  / CompleteRegistration
  // Track when a registration form is completed (ex. complete subscription, sign up for a service)
  fbq('track', 'CompleteRegistration');
  </script>
  <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=589200017912981&ev=PageView&noscript=1" alt="Facebook Pixel"/></noscript>
  <!-- End Facebook Pixel Code -->
{% endblock %}
